#!/bin/bash

export DOTFILES_PATH="$(dirname "$(readlink "$HOME/.bashrc")")"

# identify OS
IS_WIN=false;
IS_UNIX=false;
IS_MAC=false;

unameOut="$(uname -s)"
case "${unameOut}" in
    Linux*)     IS_UNIX=true;;
    Darwin*)    IS_MAC=true;;
    CYGWIN*)    IS_WIN=true;;
    MINGW*)     IS_WIN=true;;
    *)          machine="UNKNOWN:${unameOut}"
esac

export IS_WIN
export IS_UNIX
export IS_MAC

# function to DRY
sourceFiles() {
    for f in $1/*.sh; do
        if [ -f "$f" ]; then
            source "$f"
        fi
    done
}


# load additional files stored into ~/.bash_extras to keep repo clean
# it need to be the first to be loaded to override EVN or other configs
sourceFiles $HOME/.bash_extras

customizationsFolder=${DOTFILES_PATH}/customizations

# load default customizations
sourceFiles "$customizationsFolder"


# load windows specific files
if [ "$IS_WIN" = true ]; then
    sourceFiles "$customizationsFolder/windows"
fi


# load UNIX/Server specific files
if [ "$IS_UNIX" = true ]; then
    sourceFiles "$customizationsFolder/linux"
fi


# load MAC specific files
if [ "$IS_MAC" = true ]; then
    sourceFiles "$customizationsFolder/mac"
fi
